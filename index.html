<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yume Ramen Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@300;400;700&family=Zen+Kaku+Gothic+New:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/config.js"></script>
  </head>
  <body>
    <div class="container">
      <nav class="sidebar">
        <div class="logo">
          <h2>üçú Yume Ramen</h2>
        </div>
        <ul class="nav-links">
          <li class="active" onclick="showTab('dashboard')">
            <i class="fas fa-chart-pie"></i>
            <span class="nav-text">Dashboard</span>
          </li>
          <li onclick="showTab('active-orders')" style="position: relative">
            <i class="fas fa-fire"></i>
            <span class="nav-text">Active Orders</span>
            <span id="active-orders-badge" class="badge" style="display: none"
              >0</span
            >
          </li>
          <li onclick="showTab('completed-orders')">
            <i class="fas fa-check-circle"></i>
            <span class="nav-text">Completed Orders</span>
          </li>
          <li onclick="showTab('menu-management')">
            <i class="fas fa-utensils"></i>
            <span class="nav-text">Menu Management</span>
          </li>
        </ul>
        <ul class="nav-links logout-link">
          <li onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
            <span class="nav-text">Logout</span>
          </li>
        </ul>
      </nav>

      <main class="content">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
          <h1>Dashboard Overview</h1>
          <div class="stats-grid">
            <div class="stat-card">
              <h3>‚úÖ Total Orders Completed</h3>
              <p id="total-completed-orders">0</p>
            </div>
            <div class="stat-card">
              <h3>ü•ö Eggs Boiled</h3>
              <p>1,337</p>
            </div>
            <div class="stat-card">
              <h3>üí∞ Total Profit</h3>
              <p id="total-profit">‚Ç¨0.00</p>
            </div>
            <div class="stat-card">
              <h3>üò∫ Happy Cats</h3>
              <p>42</p>
            </div>
          </div>

          <div
            class="chart-container"
            style="
              margin-top: 30px;
              background: white;
              padding: 20px;
              border-radius: 10px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            "
          >
            <h2>Monthly Earnings</h2>
            <canvas id="earningsChart" style="max-height: 400px"></canvas>
          </div>
        </div>

        <!-- Active Orders Tab -->
        <div id="active-orders" class="tab-content">
          <h1>Active Orders</h1>

          <div class="controls-bar">
            <div class="control-group">
              <label><i class="fas fa-search"></i> Order ID:</label>
              <input
                type="text"
                id="active-filter-id"
                placeholder="Search ID..."
                oninput="renderCurrentOrders()"
                style="width: 100px"
              />
            </div>
            <div class="control-group">
              <label><i class="fas fa-sort"></i> Sort By:</label>
              <select id="active-sort" onchange="renderCurrentOrders()">
                <option value="date-desc">Newest First</option>
                <option value="date-asc">Oldest First</option>
                <option value="id-desc">Order ID: High to Low</option>
                <option value="id-asc">Order ID: Low to High</option>
                <option value="price-desc">Price: High to Low</option>
                <option value="price-asc">Price: Low to High</option>
              </select>
            </div>
            <div class="control-group">
              <label><i class="fas fa-filter"></i> Status:</label>
              <select
                id="active-filter-status"
                onchange="renderCurrentOrders()"
              >
                <option value="all">All Statuses</option>
                <option value="ordered">Ordered</option>
                <option value="processing">Processing</option>
                <option value="delivering">Delivering</option>
              </select>
            </div>
            <div class="control-group">
              <label><i class="fas fa-credit-card"></i> Payment:</label>
              <select id="active-filter-paid" onchange="renderCurrentOrders()">
                <option value="all">All</option>
                <option value="paid">Paid</option>
                <option value="unpaid">Unpaid</option>
              </select>
            </div>
          </div>

          <div id="active-orders-list" class="orders-grid">
            <!-- Orders will be populated here -->
          </div>
        </div>

        <!-- Completed Orders Tab -->
        <div id="completed-orders" class="tab-content">
          <h1>Completed Orders</h1>

          <div class="controls-bar">
            <div class="control-group">
              <label><i class="fas fa-search"></i> Order ID:</label>
              <input
                type="text"
                id="completed-filter-id"
                placeholder="Search ID..."
                oninput="renderCurrentOrders()"
                style="width: 100px"
              />
            </div>
            <div class="control-group">
              <label><i class="fas fa-sort"></i> Sort By:</label>
              <select id="completed-sort" onchange="renderCurrentOrders()">
                <option value="date-desc">Newest First</option>
                <option value="date-asc">Oldest First</option>
                <option value="id-desc">Order ID: High to Low</option>
                <option value="id-asc">Order ID: Low to High</option>
                <option value="price-desc">Price: High to Low</option>
                <option value="price-asc">Price: Low to High</option>
              </select>
            </div>
            <div class="control-group">
              <label><i class="fas fa-credit-card"></i> Payment:</label>
              <select
                id="completed-filter-paid"
                onchange="renderCurrentOrders()"
              >
                <option value="all">All</option>
                <option value="paid">Paid</option>
                <option value="unpaid">Unpaid</option>
              </select>
            </div>
          </div>

          <div id="completed-orders-list" class="orders-grid">
            <!-- Orders will be populated here -->
          </div>
        </div>

        <!-- Menu Management Tab -->
        <div id="menu-management" class="tab-content">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              margin-bottom: 20px;
            "
          >
            <h1>Menu Management</h1>
            <button
              class="btn"
              style="background-color: #2ecc71; color: white"
              onclick="openMealModal()"
            >
              <i class="fas fa-plus"></i> Add New Meal
            </button>
          </div>
          <div id="meals-list" class="orders-grid">
            <!-- Meals will be populated here -->
          </div>
        </div>
      </main>
    </div>

    <!-- Order Details Modal -->
    <div id="order-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal" id="close-details-modal">&times;</span>
        <h2 id="modal-order-id">Order Details</h2>
        <div id="modal-order-items" class="modal-items">
          <!-- Items will be populated here -->
        </div>
        <div class="modal-total">
          <strong>Total:</strong> <span id="modal-total-price">‚Ç¨0.00</span>
        </div>
      </div>
    </div>

    <!-- Status Update Modal -->
    <div id="status-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal" id="close-status-modal">&times;</span>
        <h2>Update Status for Order #<span id="status-order-id"></span></h2>
        <div class="status-options">
          <button
            class="btn"
            style="background-color: #f39c12; color: white; margin: 5px"
            onclick="updateOrderStatus('processing')"
          >
            Processing
          </button>
          <button
            class="btn"
            style="background-color: #3498db; color: white; margin: 5px"
            onclick="updateOrderStatus('delivering')"
          >
            Delivering
          </button>
          <button
            class="btn"
            style="background-color: #2ecc71; color: white; margin: 5px"
            onclick="updateOrderStatus('completed')"
          >
            Completed
          </button>
        </div>
      </div>
    </div>

    <!-- Add/Edit Meal Modal -->
    <div id="meal-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal" id="close-meal-modal">&times;</span>
        <h2 id="meal-modal-title">Add New Meal</h2>
        <form id="meal-form" onsubmit="handleMealSubmit(event)">
          <input type="hidden" id="meal-id" />
          <div class="form-group">
            <label for="meal-name">Name</label>
            <input
              type="text"
              id="meal-name"
              required
              style="width: 100%; padding: 8px; margin-bottom: 10px"
            />
          </div>
          <div class="form-group">
            <label for="meal-price">Price (‚Ç¨)</label>
            <input
              type="number"
              id="meal-price"
              name="Price"
              step="0.01"
              required
              style="width: 100%; padding: 8px; margin-bottom: 10px"
            />
          </div>
          <div class="form-group">
            <label for="meal-ingredients">Ingredients</label>
            <textarea
              id="meal-ingredients"
              name="Ingredients"
              style="
                width: 100%;
                padding: 8px;
                margin-bottom: 10px;
                resize: vertical;
              "
              rows="3"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="meal-image">Dish Image</label>
            <input
              type="file"
              id="meal-image"
              name="image"
              accept="image/*"
              required
              style="width: 100%; padding: 8px; margin-bottom: 10px"
            />
            <img
              id="image-preview"
              src=""
              alt="Image Preview"
              style="
                display: none;
                max-width: 100%;
                max-height: 200px;
                object-fit: contain;
                margin-top: 10px;
                border-radius: 4px;
                border: 1px solid #ddd;
              "
            />
          </div>
          <button
            type="submit"
            class="btn"
            style="background-color: #3498db; color: white; width: 100%"
          >
            Save Dish
          </button>
        </form>
      </div>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/orders.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
